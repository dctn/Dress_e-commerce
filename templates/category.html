{% extends 'base.html' %}
{% load static %}

{% block head %}
    <style>
        .product-image {
            width: 100%;
            height: 300px; /* set uniform height */
            object-fit: cover; /* crop image but keep quality */
            object-position: center; /* keep focus centered */
            border-radius: 8px;
        }

        .pagination .page-link {
            border-radius: 8px;
            padding: 6px 12px;
            font-weight: 500;
        }

        .pagination {
            gap: 6px;
            flex-wrap: wrap;
            max-width: 90vw;
            overflow-x: hidden;
        }

    </style>
{% endblock %}

{% block body %}

    {% include 'includes/nav.html' %}
    <!-- Main Section-->
    <section class="mt-0 ">
        <!-- Page Content Goes Here -->

        <!-- Category Top Banner -->
        <div class="py-10 bg-img-cover bg-overlay-dark position-relative overflow-hidden bg-pos-center-center rounded-0"
             style="background-image: url({% static './assets/images/banners/banner-category-top.jpg' %});">
            <div class="container-fluid position-relative z-index-20" data-aos="fade-right" data-aos-delay="300">
                <h1 class="fw-bold display-6 mb-4 text-white">Latest Arrivals</h1>
                <div class="col-12 col-md-6">
                    <p class="text-white mb-0 fs-5">
                        When it's time to head out and get your Kicks on, have a look at our latest arrivals. Whether
                        you're into Nike, Adidas, Dunks or New Balance, we really have something for everyone!
                    </p>
                </div>
            </div>
        </div>
        <!-- Category Top Banner -->

        <div class="container-fluid" data-aos="fade-in">
            <!-- Category Toolbar-->
            <div class="d-flex justify-content-between items-center pt-5 pb-4 flex-column flex-lg-row">
                <div>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item"><a href="#">Sneakers</a></li>
                            <li class="breadcrumb-item active" aria-current="page">New Releases</li>
                        </ol>
                    </nav>
                    <h1 class="fw-bold fs-3 mb-2">New Releases (121)</h1>
                    <p class="m-0 text-muted small">Showing 1 - 9 of 121</p>
                </div>
                <div class="d-flex justify-content-end align-items-center mt-4 mt-lg-0 flex-column flex-md-row">


                </div>
            </div>            <!-- /Category Toolbar-->

            <!-- Products-->
            <div class="row g-4">
                {% for product in all_products %}
                    <div class="col-12 col-sm-6 col-lg-4">

                        <!-- Card Product-->
                        <div class="card border border-transparent position-relative overflow-hidden h-100 transparent">
                            <div class="card-img position-relative">
                                <div class="card-badges">

                                <span class="badge badge-card"><span
                                        class="f-w-2 f-h-2 bg-danger rounded-circle d-block me-1"></span> Sale</span>

                                    {% if product.is_new %}
                                        <span class="badge badge-card"><span
                                                class="f-w-2 f-h-2 bg-success rounded-circle d-block me-1"></span> New In</span>
                                    {% endif %}

                                    {% if product.stock == 0 %}
                                        <span class="badge badge-card"><span
                                                class="f-w-2 f-h-2 bg-secondary rounded-circle d-block me-1"></span> Sold Out</span>
                                    {% endif %}

                                </div>
                                <picture class="position-relative overflow-hidden d-block bg-light">
                                    <img class="w-100 img-fluid position-relative z-index-10 product-image" title=""
                                         src="{{ product.image_1.url }}" alt="">
                                </picture>
                                <div class="position-absolute start-0 bottom-0 end-0 z-index-20 p-2">
                                    <button class="btn btn-quick-add"><i class="ri-add-line me-2"></i> Quick Add
                                    </button>
                                </div>
                            </div>
                            <div class="card-body px-0">
                                <a class="text-decoration-none link-cover"
                                   href="{% url 'product_details' product.variant_id %}">
                                    {{ product.base_product.name }}
                                </a>
                                <small class="text-muted d-block">{{ product.color.name }}, 10 sizes</small>
                                {% if product.price %}
                                    {% if product.is_discount %}
                                        <p class="mt-2 mb-0 small"><s class="text-muted">₹{{ product.price }}</s> <span
                                            class="text-danger">₹{{ product.discount_price }}</span>
                                    {% else %}
                                        <span class="text-danger">₹{{ product.price }}</span>
                                    {% endif %}
                                {% elif product.price_per_inches %}
                                    <span class="text-danger">₹{{ product.price_per_inches }} per inch</span>

                                {% endif %}
                                </p>
                            </div>
                        </div>
                        <!--/ Card Product-->
                    </div>
                {% endfor %}


            </div>
            <!-- / Products-->

            <!-- Pagination -->
            <!-- Pagination -->
            <div class="d-flex justify-content-center mt-4">
                <nav aria-label="Page navigation" class="text-center">
                    <ul class="pagination flex-wrap justify-content-center">

                        {% if all_products.has_previous %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ all_products.previous_page_number }}">Prev</a>
                            </li>
                        {% else %}
                            <li class="page-item disabled">
                                <span class="page-link">Prev</span>
                            </li>
                        {% endif %}

                        {% if all_products.number > 3 %}
                            <li class="page-item"><a class="page-link" href="?page=1">1</a></li>
                            <li class="page-item disabled"><span class="page-link">…</span></li>
                        {% endif %}

                        {% for num in all_products.paginator.page_range %}
                            {% if num >= all_products.number|add:-1 and num <= all_products.number|add:1 %}
                                {% if num == all_products.number %}
                                    <li class="page-item active">
                                        <span class="page-link">{{ num }}</span>
                                    </li>
                                {% else %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                                    </li>
                                {% endif %}
                            {% endif %}
                        {% endfor %}

                        {% if all_products.number < all_products.paginator.num_pages|add:-2 %}
                            <li class="page-item disabled"><span class="page-link">…</span></li>
                            <li class="page-item">
                                <a class="page-link" href="?page={{ all_products.paginator.num_pages }}">
                                    {{ all_products.paginator.num_pages }}
                                </a>
                            </li>
                        {% endif %}

                        {% if all_products.has_next %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ all_products.next_page_number }}">Next</a>
                            </li>
                        {% else %}
                            <li class="page-item disabled">
                                <span class="page-link">Next</span>
                            </li>
                        {% endif %}

                    </ul>
                </nav>
            </div>


            <!-- / Pagination -->

        </div>

        <!-- /Page Content -->
    </section>
    <!-- / Main Section-->




{% endblock %}
